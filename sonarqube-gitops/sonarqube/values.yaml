# üö® MUST be top-level (NOT under sonarqube)
initSysctl:
  enabled: false   # ‚ùå REQUIRED for GKE Autopilot

# SonarQube main configuration
sonarqube:
  replicaCount: 1

  # Security settings
  securityContext:
    fsGroup: 1000

  containerSecurityContext:
    runAsUser: 1000
    runAsNonRoot: true
    allowPrivilegeEscalation: false

# Resource requests and limits for SonarQube pods
resources:
  requests:
    cpu: "300m"
    memory: "1.5Gi"
  limits:
    cpu: "800m"
    memory: "2Gi"

# PostgreSQL configuration
postgresql:
  enabled: true

  # Image configuration
  image:
    registry: docker.io
    repository: bitnami/postgresql
    tag: 14.9.0-debian-11-r0   # ‚úÖ VALID IMAGE

  # Primary container resources
  primary:
    resources:
      requests:
        cpu: "200m"
        memory: "768Mi"
      limits:
        cpu: "500m"
        memory: "1.5Gi"

# Persistence configuration
persistence:
  enabled: true
  size: 10Gi
